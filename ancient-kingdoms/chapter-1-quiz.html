<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 1 Quiz | K-Story</title>

<style>
    body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: linear-gradient(180deg, #f7eee5, #f3e2d8, #f9e8d3);
        color: #3a302a;
        padding-bottom: 60px;
        min-height: 100vh;
    }

    .hero {
        text-align: center;
        padding: 70px 20px;
        background: linear-gradient(135deg, #d46a34, #c8553e, #a1425a);
        color: #fff9f1;
        border-bottom: 8px solid #8c3d2d;
    }

    .hero h1 {
        margin: 0;
        font-size: 45px;
        font-weight: 800;
    }
    .hero p {
        margin-top: 12px;
        font-size: 18px;
        opacity: 0.95;
    }

    /* QUIZ BOX */
    #quiz-box {
        max-width: 900px;
        margin: 45px auto;
        padding: 35px;
        background: #fff7ef;
        border-radius: 22px;
        border: 2px solid #e3bfa3;
        box-shadow: 0 14px 35px rgba(180,120,80,0.28);
        transition: 0.25s ease;
    }

    #q-number {
        font-size: 28px;
        font-weight: 800;
        text-align: center;
        color: #a24a34;
        margin-bottom: 10px;
    }

    #question {
        font-size: 22px;
        font-weight: 600;
        text-align: center;
        margin: 20px 0 30px;
    }

    #options {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 14px;
        margin: 10px 0 20px;
    }

    .option {
        background: #fbe9da;
        padding: 12px 20px;
        border-radius: 12px;
        border: 2px solid #e6c6a7;
        cursor: pointer;
        display: flex;
        align-items: center;
        font-size: 18px;
        transition: 0.2s;
    }

    .option:hover {
        background: #f6dfcc;
        transform: translateY(-2px);
    }

    .option input {
        transform: scale(1.3);
        margin-right: 10px;
        cursor: pointer;
    }

    button {
        background: #d46a34;
        color: #fff9f1;
        padding: 14px 30px;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        display: block;
        margin: 30px auto 0;
        font-size: 18px;
        transition: 0.2s;
    }

    button:hover {
        background: #b44f23;
        transform: translateY(-2px);
    }

    /* Toast */
    #toast {
        position: fixed;
        bottom: 25px;
        right: 25px;
        background: rgba(0,0,0,0.85);
        color: #fff;
        padding: 18px 25px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        opacity: 0;
        pointer-events: none;
        transform: translateY(30px);
        transition: 0.3s ease;
        max-width: 300px;
        z-index: 9999;
        white-space: pre-line;
    }
    #toast.show { opacity: 1; transform: translateY(0); }
    #toast.success { background: #2ecc71; }
    #toast.error { background: #e74c3c; }

    /* Certificate Name Input */
    #name-screen {
        display: none;
        max-width: 500px;
        margin: 90px auto;
        background: #ffffff;
        padding: 35px;
        border-radius: 14px;
        border: 2px solid #d3c2a8;
        box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        text-align: center;
    }

    #name-screen input {
        width: 80%;
        padding: 14px;
        border-radius: 10px;
        font-size: 18px;
        border: 2px solid #c3b199;
    }

    /* Certificate */
    #certificate {
        display: none;
        margin-top: 30px;
        text-align: center;
    }

    .cert-box {
        position: relative;
        background: #fffef8;
        padding: 90px 70px 70px;
        max-width: 900px;
        margin: auto;
        border-radius: 20px;
        border: 12px solid #b08a52;

        background-image: 
            radial-gradient(circle, rgba(0,0,0,0.03) 1px, transparent 1px),
            linear-gradient(135deg, #fffef8, #faf5e8);
        background-size: 14px 14px, 100%;
        box-shadow: 0 10px 50px rgba(0,0,0,0.20);
    }

    .gold-watermark {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 420px;
        height: 420px;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #fff8c9, #f7d774 35%, #e6b84c 60%, #b8912d 100%);
        opacity: 0.12;
        box-shadow:
            inset 0 0 30px rgba(255,255,255,0.45),
            inset 0 0 60px rgba(255,255,255,0.25);
        pointer-events: none;
        user-select: none;
    }

    .microtext-border {
        position: absolute;
        top: 15px; left: 15px; right: 15px; bottom: 15px;
        border: 2px solid #b08a52;
        border-radius: 10px;
        padding: 6px;
        font-size: 6px;
        line-height: 6px;
        letter-spacing: 1px;
        color: #8e754a;
        text-align: center;
        pointer-events: none;
        user-select: none;
    }

    .cert-name {
        font-size: 36px;
        font-weight: 700;
        color: #333;
        margin-top: 20px;
    }

    .cert-score {
        font-size: 26px;
        margin-top: 12px;
    }

</style>
</head>
<body>

<div class="hero">
    <h1>Chapter 1 Quiz</h1>
    <p>One question at a time â€” let's learn!</p>
</div>

<!-- QUIZ -->
<div id="quiz-box">
    <h2 id="q-number">Question 1</h2>
    <div id="question"></div>
    <div id="options"></div>
    <button onclick="submitAnswer()">Next</button>
</div>

<div id="toast"></div>

<!-- NAME ENTRY -->
<div id="name-screen">
    <h2>Enter Your Name</h2>
    <input type="text" id="studentName" placeholder="Your name...">
    <button onclick="generateCertificate()">Generate Certificate</button>
</div>

<!-- CERTIFICATE -->
<div id="certificate">
    <div class="cert-box">
        <div class="gold-watermark"></div>

        <div class="microtext-border">
            OFFICIAL K-STORY CERTIFICATE â€¢ VERIFIED â€¢ AUTHENTIC â€¢ NOT FORGERY â€¢
        </div>

        <h1>Certificate of Achievement</h1>
        <p>This certifies that</p>

        <div id="cert-name" class="cert-name"></div>

        <p>has successfully completed the Chapter 1 Quiz.</p>

        <p id="cert-score" class="cert-score"></p>

        <p id="cert-date" class="cert-score"></p>
        <p id="cert-id" class="cert-score" style="font-size:14px; font-family:monospace;"></p>

        <p style="margin-top:25px;">Presented by K-Story Learning</p>
    </div>
    
</div>

<center>
<div id="shotMsg" style="font-size:20px; margin-top:15px;"></div>
</center>


<script>
// QUESTIONS
const QUESTIONS = [
 {q:"What kind of homes did the earliest people on the Korean Peninsula live in?", o:["Tall stone towers","Half-buried huts with straw roofs","Wooden castles","Houses made of metal"]},
 {q:"What is comb-pattern pottery?", o:["Pots made of metal","Pots decorated with zigzag lines and patterns","Pots shaped like animals","Pots made for storing gold"]},
 {q:"What animals were often carved on the Bangudae petroglyphs?", o:["Giraffes","Whales and deer","Lions and elephants","Camels"]},
 {q:"What were dolmens?", o:["Ancient bridges","Stone tombs made from huge rocks","Large weapons used in battle","Stone towers for watching the sea"]},
 {q:"Why is bronze important in early Korean history?", o:["It was shiny","It was used to build palaces","It made stronger tools and weapons","It was easy to find everywhere"]},
 {q:"What does the name 'Joseon' mean?", o:["Mountain Fortress","Land of Tigers","Morning Freshness","Golden Kingdom"]},
 {q:"Who descended from heaven to guide the people, according to legend?", o:["King Sejong","Hwanung","Alexander the Great","Julius Caesar"]},
 {q:"What trial did the bear and tiger have to undergo?", o:["Fighting a dragon","Living in a cave and eating only mugwort and garlic","Crossing a deep river","Climbing Baekdu Mountain"]},
 {q:"Why did the tiger fail the trial?", o:["He was injured","He did not like garlic","He was impatient and left the cave","He fell asleep"]},
 {q:"What is the purpose of the Dangun legend for Koreans today?", o:["To teach magic","To show the importance of wealth","To give a sense of origin and shared heritage","To explain how to farm"]}
];

const ANSWERS = [1,1,1,1,2,2,1,1,2,2];

let pool = Array.from({length: QUESTIONS.length},(_,i)=>i).sort(()=>Math.random()-0.5).slice(0,10);

let pos = 0;
let score = 0;

// SHOW QUESTION
function showQuestion() {
    if (pos >= pool.length) return finish();

    const idx = pool[pos];
    const q = QUESTIONS[idx];

    document.getElementById("q-number").innerText = `Question ${pos + 1}`;
    document.getElementById("question").innerText = q.q;

    let html = "";
    q.o.forEach((opt, i) => {
        html += `
        <label class="option">
            <input type="radio" name="opt" value="${i}">
            ${opt}
        </label>`;
    });

    document.getElementById("options").innerHTML = html;
}
showQuestion();

// SUBMIT ANSWER
function submitAnswer() {
    const picked = document.querySelector("input[name='opt']:checked");
    if (!picked) return showToast("Please pick an answer!", "error");

    const user = parseInt(picked.value);
    const correctIndex = ANSWERS[pool[pos]];
    const correctText = QUESTIONS[pool[pos]].o[correctIndex];

    if (user === correctIndex) {
        showToast("Correct! ðŸŽ‰", "success");
        score++;
    } else {
        showToast("Incorrect!\nCorrect answer:\n" + correctText, "error");
    }

    pos++;
    showQuestion();
}

// TOAST
function showToast(msg, type="success") {
    const t = document.getElementById("toast");
    t.className = type + " show";
    t.textContent = msg;

    setTimeout(() => {
        t.classList.remove("show");
    }, 2500);
}

// FINISH â†’ NAME SCREEN
function finish() {
    document.getElementById("quiz-box").style.display = "none";
    document.getElementById("name-screen").style.display = "block";
}

// CERTIFICATE
function generateCertificate() {
    const name = document.getElementById("studentName").value.trim();
    if (!name) return;

    document.getElementById("name-screen").style.display = "none";

    document.getElementById("cert-name").innerText = name;
    document.getElementById("cert-score").innerText = `Score: ${score} / ${pool.length}`;
    document.getElementById("cert-date").innerText = "Awarded on " + new Date().toLocaleDateString();
    document.getElementById("cert-id").innerText = "Certificate ID: KS-" + Math.random().toString(36).substring(2,10).toUpperCase();

    document.getElementById("certificate").style.display = "block";
showScreenshotInstructions();

}

async function detectOS() {
    const ua = navigator.userAgent;

    if (/Windows NT/i.test(ua)) return "Windows";
    if (/Android/i.test(ua)) return "Android";
    if (/iPhone|iPad|iPod/i.test(ua)) return "iOS";   // MUST be before macOS
    if (/Macintosh|Mac OS X/i.test(ua)) return "macOS";
    if (/CrOS/i.test(ua)) return "ChromeOS";
    if (/Linux/i.test(ua)) return "Linux";

    return "Unknown";
}



async function showScreenshotInstructions() {
    const os = await detectOS();
    let instructions = "";

    switch (os) {
        case "Windows":
            instructions = "Press Win + Shift + S to take a screenshot of the certificate.";
            break;
        case "macOS":
            instructions = "Press Shift + Command + 4 to take a screenshot of the certificate.";
            break;
        case "iOS":
            instructions = "Press Power + Volume Up to take a screenshot of the certificate.";
            break;
        case "Android":
            instructions = "Press Power + Volume Down to take a screenshot of the certificate.";
            break;
        case "ChromeOS":
            instructions = "Press Ctrl + Shift + â–­|| (the switcher key) to take a screenshot of the certificate.";
            break;
        case "Linux":
            instructions = "Press PrtSc or Shift + PrtSc depending on your distro to take a screenshot of the certificate.";
            break;
        default:
            instructions = "Your device isn't recognized, but try your power + volume buttons to take a screenshot of the certificate!";
            break;
    }

    document.getElementById("shotMsg").innerHTML =
        `${instructions}`;
}


</script>

</body>
</html>
